# =============================================
#  Configuration principale du plugin Nexus
#  PaperMC 1.21.x — Java 21
# =============================================

config-version: 3

server:
  mode: "nexus"
  language: "fr"
  timezone: "Europe/Paris"

config:
  backups:
    # Nombre maximum de sauvegardes à conserver par fichier. Mettre à 0 pour désactiver.
    max_backups_per_file: 10

perf:
  hud_hz: 5
  scoreboard_hz: 3
  particles_soft_cap: 1200
  particles_hard_cap: 2000
  budget:
    max_entities: 200
    max_items: 128
    max_projectiles: 64

threads:
  io_virtual: false
  io_pool: 12
  io_keep_alive_ms: 30000
  compute_pool: 4
  shutdown:
    await_seconds: 5
    force_cancel_seconds: 3
  scheduler:
    main_check_interval_ticks: 1

database:
  enabled: true
  jdbc: "jdbc:mariadb://127.0.0.1:3306/nexus"
  user: "nexus"
  password: "change_me"
  pool:
    maxSize: 10
    minIdle: 2
    connTimeoutMs: 3000
  write_behind_interval_seconds: 60
  cache:
    profiles:
      max_size: 1000
      expire_after_access_minutes: 15
  retention_policy:
    # Durée de conservation des historiques de matchs en jours. Mettre à 0 pour désactiver la purge.
    match_history_days: 90

rate-limits:
  enabled: true
  cleanup:
    interval_minutes: 60
    retention_minutes: 1440
  actions:
    'purchase:class': 3
    'purchase:cosmetic': 3
    'shop:refresh': 60
    'quest:reroll_daily': 300

services:
  expose-bukkit-services: false

timeouts:
  startMs: 5000
  stopMs: 3000
  watchdog:
    reset_ms: 10000
    paste_ms: 8000

degraded-mode:
  enabled: true
  banner: true

queue:
  tick_hz: 5
  vip_weight: 1

analytics:
  outbox:
    enabled: false
    flush_interval_seconds: 30
    max_batch_size: 200

holograms:
  update_hz: 5
  max_visible_per_instance: 80
  line_spacing: 0.27
  view_range: 48.0
  pool:
    max_text_displays: 64
    max_interactions: 32

ui:
  minimessage:
    strict: true
  title:
    times:
      short:
        fadeIn: 5
        stay: 40
        fadeOut: 10
      normal:
        fadeIn: 10
        stay: 60
        fadeOut: 20
      long:
        fadeIn: 20
        stay: 100
        fadeOut: 40
  bossbar:
    defaults:
      color: PURPLE
      overlay: NOTCHED_20
      flags:
        - DARKEN_SCREEN
      updateEveryTicks: 10
